<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta charset="utf-8">
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/codemirror.min.css"/>
    <link rel="stylesheet" href="https://uicdn.toast.com/editor/latest/toastui-editor.min.css"/>
    <script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
    <link rel="stylesheet" th:href="@{/css/blogupload.css}">
    <title>菜鸟论坛-编写博客</title>
</head>
<body>

    <div class="Main">
        <input type="text" id="title" placeholder="请填写文章标题" />
        <script src="https://uicdn.toast.com/editor/latest/toastui-editor-all.min.js"></script>
        <div id="editor"></div>
        <input type="button" value="发布" onclick="upload()" />
        <script>
        const Editor = toastui.Editor;
        const editor = new Editor({
            el: document.querySelector('#editor'),
            height: '50vh',
            initialEditType: 'markdown',
            previewStyle: 'vertical',
            initialValue:''
        });

        function upload(){
            $.post('/blog',{
                "title":$("#title").val(),
                "content":editor.getMarkdown()
            },
            function(data){
                if(data&&data['msg'])
                    alert(data['msg']);
            })
        }
        </script>
    </div>
    <div class="Footer">

    </div>
</body>
</html>
